<!doctype html>
<html lang="pt-BR" translate="no">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Content-Language" content="pt-BR">
  <meta name="google" content="notranslate">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hub Resili√™ncia Clim√°tica ‚Ä¢ Home</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            inter: ["Inter", "system-ui", "-apple-system", "Segoe UI", "Roboto", "Arial", "sans-serif"],
            poppins: ["Poppins", "Inter", "system-ui", "-apple-system", "Segoe UI", "Roboto", "Arial", "sans-serif"]
          },
          colors: {
            "regen-green": "#1B7F5A",
            "regen-greenLight": "#4CAF8F",
            "regen-blue": "#0D3B66",
            "regen-yellow": "#F2C94C",
            "regen-graphite": "#232323",
            "regen-bg": "#F5F7F6",
            "muted": "#667085"
          },
          boxShadow: {
            soft: "0 10px 30px rgba(13,59,102,.12)",
            hero: "0 24px 60px rgba(13,59,102,.14)",
            hero2: "0 16px 40px rgba(27,127,90,.16)"
          },
          borderRadius: {
            xxl: "20px",
            xxxl: "28px"
          }
        }
      }
    }
  </script>

  <!-- Leaflet (Mapa) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <style>
    html, body { height: 100%; }
    body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 700px at 18% 8%, rgba(76,175,143,.24), transparent 55%),
        radial-gradient(900px 600px at 82% 14%, rgba(13,59,102,.20), transparent 55%),
        radial-gradient(800px 500px at 50% 90%, rgba(242,201,76,.18), transparent 55%),
        linear-gradient(180deg, #f7fbf9 0%, #F5F7F6 65%, #f3f6f5 100%);
      overflow-x: hidden;
    }
    .bg-grid{
      position: fixed; inset: 0;
      pointer-events: none;
      opacity: .75;
      background:
        radial-gradient(circle at 1px 1px, rgba(13,59,102,.09) 1px, transparent 0),
        linear-gradient(transparent 0, transparent 95%, rgba(13,59,102,.05) 100%);
      background-size: 34px 34px, 100% 100%;
      mix-blend-mode: multiply;
      mask-image: radial-gradient(closest-side at 50% 18%, black 0%, transparent 66%);
      z-index: 0;
    }
    .noise{
      position: fixed; inset: 0;
      pointer-events: none;
      opacity:.06;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      z-index: 0;
    }
    .cursor-glow{
      position: fixed;
      width: 560px; height: 560px;
      border-radius: 50%;
      pointer-events: none;
      transform: translate(-50%, -50%);
      background: radial-gradient(circle, rgba(76,175,143,.22) 0%, rgba(13,59,102,.12) 28%, transparent 62%);
      filter: blur(4px);
      opacity: 0;
      transition: opacity .25s ease;
      z-index: 2;
    }
    @media (pointer: coarse){ .cursor-glow{ display:none !important; } }

    .in{ transform: translateY(0) !important; opacity: 1 !important; }
    [data-reveal]{ transform: translateY(10px); opacity: 0; transition: transform .55s ease, opacity .55s ease; }

    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; scroll-behavior: auto !important; }
      .cursor-glow{ display:none; }
      [data-reveal]{ transform:none; opacity: 1; }
    }

    @keyframes pulse{
      0%,100%{ transform: scale(1); opacity: 1; }
      50%{ transform: scale(1.25); opacity: .75; }
    }
    .pulse-dot{ animation: pulse 2.2s ease-in-out infinite; }

    .nice-scroll::-webkit-scrollbar{ height: 10px; width: 10px; }
    .nice-scroll::-webkit-scrollbar-thumb{ background: rgba(13,59,102,.14); border-radius: 999px; border: 2px solid rgba(245,247,246,1); }
    .nice-scroll::-webkit-scrollbar-track{ background: transparent; }

    .tabs-topbar{
      position: sticky; top: 0;
      z-index: 5;
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(13,59,102,.10);
    }

    #map{ height: 440px; }
    .leaflet-container{ font: inherit; }
    .leaflet-control-zoom a{ border-radius: 12px !important; overflow: hidden; }
  </style>
</head>

<body class="text-regen-graphite">
  <div class="bg-grid"></div>
  <div class="noise"></div>
  <div class="cursor-glow" id="cursorGlow"></div>

  <!-- TOPBAR -->
  <header class="sticky top-0 z-50 backdrop-blur-xl bg-regen-bg/80 border-b border-regen-blue/10">
    <div class="mx-auto max-w-[1180px] px-4 py-3 flex flex-wrap items-center justify-between gap-3">
      <a class="flex items-center gap-3 min-w-0" href="#top" aria-label="Ir para o topo">
        <div class="w-10 h-10 rounded-2xl shadow-soft overflow-hidden"
             style="background:conic-gradient(from 180deg, #1B7F5A, #4CAF8F, #0D3B66, #1B7F5A);">
          <div class="w-full h-full" style="background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.55), transparent 55%);"></div>
        </div>
        <div class="min-w-0">
          <div class="font-poppins font-semibold tracking-tight text-sm leading-tight truncate">Hub Resili√™ncia Clim√°tica</div>
          <div class="text-xs text-muted truncate">Plataforma ‚Ä¢ Territ√≥rios & CRGR</div>
        </div>
      </a>

      <button id="menuBtn"
        class="md:hidden inline-flex items-center gap-2 px-3 py-2 rounded-2xl border border-regen-blue/15 bg-white/80 font-extrabold text-sm"
        type="button" aria-expanded="false" aria-controls="mainNav">
        <span aria-hidden="true">‚â°</span> Menu
      </button>

      <nav id="mainNav" class="hidden md:flex items-center gap-3 flex-wrap justify-center" aria-label="Navega√ß√£o principal">
        <a class="px-3 py-2 rounded-2xl font-semibold text-sm text-black/80 hover:bg-regen-green/10 hover:text-regen-green transition" href="#top">In√≠cio</a>
        <a class="px-3 py-2 rounded-2xl font-semibold text-sm text-black/80 hover:bg-regen-green/10 hover:text-regen-green transition" href="#crgr">CRGRs</a>
        <a class="px-3 py-2 rounded-2xl font-semibold text-sm text-black/80 hover:bg-regen-green/10 hover:text-regen-green transition" href="#parcerias">Parcerias</a>
        <a class="px-3 py-2 rounded-2xl font-semibold text-sm text-black/80 hover:bg-regen-green/10 hover:text-regen-green transition" href="#dados">Dados</a>
        <a class="px-3 py-2 rounded-2xl font-semibold text-sm text-black/80 hover:bg-regen-green/10 hover:text-regen-green transition" href="#faq">FAQ</a>
      </nav>

      <div class="flex items-center gap-2">
        <button id="btnEntrar"
          class="px-4 py-2 rounded-2xl font-extrabold text-sm border border-regen-yellow/50
                 bg-gradient-to-br from-regen-yellow to-[#ffe08a] text-black/90
                 shadow-[0_18px_34px_rgba(242,201,76,.26)] hover:brightness-[1.02] hover:-translate-y-[1px] transition">
          Cadastrar / Login <span aria-hidden="true">‚Üí</span>
        </button>
      </div>

      <div id="mobileNavWrap" class="md:hidden w-full hidden">
        <div class="mt-2 rounded-2xl border border-regen-blue/10 bg-white/90 shadow-soft p-2">
          <a class="block px-3 py-3 rounded-2xl font-semibold text-sm hover:bg-regen-bg" href="#top">In√≠cio</a>
          <a class="block px-3 py-3 rounded-2xl font-semibold text-sm hover:bg-regen-bg" href="#crgr">CRGRs</a>
          <a class="block px-3 py-3 rounded-2xl font-semibold text-sm hover:bg-regen-bg" href="#parcerias">Parcerias</a>
          <a class="block px-3 py-3 rounded-2xl font-semibold text-sm hover:bg-regen-bg" href="#dados">Dados</a>
          <a class="block px-3 py-3 rounded-2xl font-semibold text-sm hover:bg-regen-bg" href="#faq">FAQ</a>
        </div>
      </div>
    </div>
  </header>

  <main id="top" class="mx-auto max-w-[1180px] px-4 pb-24 relative z-[3]">

    <!-- HERO -->
    <section class="pt-8 pb-4">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 items-stretch">
        <div data-reveal class="relative overflow-hidden rounded-3xl border border-regen-blue/10 bg-white/70 shadow-hero p-6 md:p-7">
          <div class="absolute inset-[-80px] opacity-75 pointer-events-none"
            style="background:
              radial-gradient(circle at 20% 30%, rgba(76,175,143,.25), transparent 55%),
              radial-gradient(circle at 85% 25%, rgba(13,59,102,.20), transparent 55%),
              radial-gradient(circle at 55% 95%, rgba(242,201,76,.22), transparent 55%);
              transform: rotate(-8deg);"></div>

          <div class="relative z-[1] inline-flex items-center gap-3 px-3 py-2 rounded-full bg-regen-green/10 border border-regen-green/20 text-regen-green font-extrabold text-xs w-fit">
            <span class="w-2 h-2 rounded-full bg-regen-greenLight shadow-[0_0_0_5px_rgba(76,175,143,.22)] pulse-dot"></span>
            Hub ‚Ä¢ Territ√≥rios & CRGR
          </div>

          <h1 class="relative z-[1] mt-4 font-poppins tracking-tight text-4xl md:text-5xl leading-tight">
            Um Hub para estabelecer a <span class="text-regen-green">Resili√™ncia clim√°tica</span> em Porto Alegre
          </h1>

          <p class="relative z-[1] mt-4 text-sm md:text-[15px] leading-relaxed text-black/80 max-w-[60ch]">
           O Hub Resili√™ncia Clim√°tica √© um ponto de encontro digital que conecta cooperativas, comunidades, t√©cnicos e gestores 
           p√∫blicos.
  Aqui voc√™ encontra apoio pr√°tico para fortalecer a reciclagem, a economia circular e a resposta aos desafios clim√°ticos nos territ√≥rios. </p>

          <div class="relative z-[1] mt-5 flex flex-wrap gap-2">
            <button id="btnScroll2"
              class="px-4 py-2 rounded-2xl font-extrabold text-sm border border-regen-yellow/50
                     bg-gradient-to-br from-regen-yellow to-[#ffe08a] text-black/90
                     shadow-[0_18px_34px_rgba(242,201,76,.26)] hover:brightness-[1.02] hover:-translate-y-[1px] transition">
              Ver o painel do territ√≥rio <span aria-hidden="true">‚Üí</span>
            </button>
            <button id="btnCadastrar"
              class="px-4 py-2 rounded-2xl font-extrabold text-sm bg-white/80 border border-regen-blue/15 text-black/80
                     hover:-translate-y-[1px] hover:shadow-soft transition">
              Entrar no Hub <span aria-hidden="true">‚Üó</span>
            </button>
          </div>

         
          
        </div>

        <div data-reveal class="relative overflow-hidden rounded-3xl border border-regen-blue/10 bg-white/70 shadow-hero2 min-h-[320px] lg:min-h-[520px] p-4">
          <div class="absolute inset-[-140px] opacity-90 pointer-events-none"
            style="background:
              radial-gradient(circle at 25% 30%, rgba(76,175,143,.28), transparent 55%),
              radial-gradient(circle at 80% 20%, rgba(13,59,102,.24), transparent 55%),
              radial-gradient(circle at 60% 90%, rgba(242,201,76,.26), transparent 55%);
              transform: rotate(-8deg);"></div>

          <div class="relative z-[1] h-full w-full grid place-items-center">
            <img
              class="w-[min(560px,92%)] max-h-[480px] object-contain object-center drop-shadow-[0_34px_70px_rgba(13,59,102,.24)]"
              src="img/Design sem nome (4) (1).png"
              alt="Hub Resili√™ncia Clim√°tica"
              loading="lazy"
              decoding="async"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- ‚úÖ PILARES (INSERIR ANTES DA SE√á√ÉO #crgr) -->
<section id="pilares" data-reveal class="mt-6 rounded-[32px] border border-regen-blue/10 bg-white/65 shadow-[0_22px_56px_rgba(13,59,102,.12)] p-5 md:p-6 relative overflow-hidden">
  <div class="absolute inset-[-170px] opacity-90 pointer-events-none"
    style="background:
      radial-gradient(circle at 18% 30%, rgba(242,201,76,.20), transparent 55%),
      radial-gradient(circle at 85% 25%, rgba(76,175,143,.22), transparent 55%),
      radial-gradient(circle at 58% 95%, rgba(13,59,102,.16), transparent 56%);
      transform: rotate(-8deg);"></div>

  <div class="relative z-[1]">
    <div class="inline-flex items-center gap-2 px-3 py-2 rounded-full bg-regen-green/10 border border-regen-green/20 text-regen-green font-black text-xs w-fit">
      üß± Pilares do Hub
    </div>

    <div class="mt-3 flex flex-wrap items-end justify-between gap-3">
      <div>
        <h2 class="font-poppins tracking-tight text-2xl md:text-[26px]">Pilares do Hub</h2>
        <p class="mt-1 text-sm md:text-[13.5px] text-black/75 max-w-[78ch]">
          Dois eixos que sustentam o funcionamento do Hub: fortalecer a cadeia da reciclagem e organizar a forma√ß√£o + governan√ßa territorial.
        </p>
      </div>

      <div class="flex flex-wrap gap-2">
        <a href="#tab-trainings"
           data-open-tab="tab-trainings"
           class="inline-flex items-center gap-2 px-4 py-2 rounded-2xl font-extrabold text-sm bg-white/80 border border-regen-blue/15 text-regen-blue
                  hover:-translate-y-[1px] hover:shadow-soft transition">
          Ver trilhas & treinamentos <span aria-hidden="true">‚Üó</span>
        </a>
        <a href="#crgr"
           class="inline-flex items-center gap-2 px-4 py-2 rounded-2xl font-extrabold text-sm bg-regen-green/10 border border-regen-green/20 text-regen-green
                  hover:-translate-y-[1px] hover:shadow-soft transition">
          Ver CRGRs <span aria-hidden="true">‚Üí</span>
        </a>
      </div>
    </div>

    <div class="mt-5 grid grid-cols-1 lg:grid-cols-2 gap-3">
      <!-- Pilar 1 -->
      <article class="rounded-xxl border border-regen-blue/10 bg-white/75 shadow-[0_18px_42px_rgba(13,59,102,.10)] p-5 hover:-translate-y-[3px] hover:shadow-[0_26px_70px_rgba(13,59,102,.14)] hover:border-regen-green/20 transition">
        <div class="flex items-start justify-between gap-4">
          <div class="w-12 h-12 rounded-2xl grid place-items-center bg-regen-green/10 border border-regen-green/20">
            ‚ôª
          </div>
          <span class="text-xs font-black px-2 py-1 rounded-lg bg-regen-bg border border-slate-200 text-slate-600">
            Eixo 01
          </span>
        </div>

        <h3 class="mt-3 font-poppins font-semibold tracking-tight text-lg text-regen-blue">
          Reciclagem & Economia Circular
        </h3>

        <p class="mt-2 text-sm text-black/75 leading-relaxed">
          Boas pr√°ticas, conte√∫dos e instrumentos para fortalecer a cadeia da reciclagem.
        </p>

        <div class="mt-4 grid grid-cols-1 sm:grid-cols-3 gap-2">
          <div class="rounded-2xl border border-slate-200 bg-white p-3">
            <div class="text-xs font-bold text-slate-500">Conte√∫dos</div>
            <div class="text-sm font-semibold text-regen-blue mt-1">Cartilhas & guias</div>
          </div>
          <div class="rounded-2xl border border-slate-200 bg-white p-3">
            <div class="text-xs font-bold text-slate-500">Opera√ß√£o</div>
            <div class="text-sm font-semibold text-regen-blue mt-1">Triagem & seguran√ßa</div>
          </div>
          <div class="rounded-2xl border border-slate-200 bg-white p-3">
            <div class="text-xs font-bold text-slate-500">Territ√≥rio</div>
            <div class="text-sm font-semibold text-regen-blue mt-1">Pontos & rotas</div>
          </div>
        </div>

        <div class="mt-4 flex flex-wrap gap-2">
          <button data-open-tab="tab-services"
            class="px-4 py-2 rounded-2xl font-extrabold text-sm bg-white/80 border border-regen-blue/15 text-black/80 hover:-translate-y-[1px] hover:shadow-soft transition">
            Ver servi√ßos <span aria-hidden="true">‚Üí</span>
          </button>
          <button data-open-tab="tab-map"
            class="px-4 py-2 rounded-2xl font-extrabold text-sm bg-white/80 border border-regen-blue/15 text-black/80 hover:-translate-y-[1px] hover:shadow-soft transition">
            Abrir mapa <span aria-hidden="true">üó∫</span>
          </button>
        </div>
      </article>

      <!-- Pilar 2 -->
      <article class="rounded-xxl border border-regen-blue/10 bg-white/75 shadow-[0_18px_42px_rgba(13,59,102,.10)] p-5 hover:-translate-y-[3px] hover:shadow-[0_26px_70px_rgba(13,59,102,.14)] hover:border-regen-green/20 transition">
        <div class="flex items-start justify-between gap-4">
          <div class="w-12 h-12 rounded-2xl grid place-items-center bg-regen-green/10 border border-regen-green/20">
            üìö
          </div>
          <span class="text-xs font-black px-2 py-1 rounded-lg bg-regen-bg border border-slate-200 text-slate-600">
            Eixo 02
          </span>
        </div>

        <h3 class="mt-3 font-poppins font-semibold tracking-tight text-lg text-regen-blue">
          Forma√ß√£o & Governan√ßa
        </h3>

        <p class="mt-2 text-sm text-black/75 leading-relaxed">
          Trilhas formativas, perfis de acesso e gest√£o colaborativa dos territ√≥rios.
        </p>

        <div class="mt-4 grid grid-cols-1 sm:grid-cols-3 gap-2">
          <div class="rounded-2xl border border-slate-200 bg-white p-3">
            <div class="text-xs font-bold text-slate-500">Trilhas</div>
            <div class="text-sm font-semibold text-regen-blue mt-1">Do b√°sico ao avan√ßado</div>
          </div>
          <div class="rounded-2xl border border-slate-200 bg-white p-3">
            <div class="text-xs font-bold text-slate-500">Perfis</div>
            <div class="text-sm font-semibold text-regen-blue mt-1">Acessos por papel</div>
          </div>
          <div class="rounded-2xl border border-slate-200 bg-white p-3">
            <div class="text-xs font-bold text-slate-500">Gest√£o</div>
            <div class="text-sm font-semibold text-regen-blue mt-1">Planos & indicadores</div>
          </div>
        </div>

        <div class="mt-4 flex flex-wrap gap-2">
          <button data-open-tab="tab-trainings"
            class="px-4 py-2 rounded-2xl font-extrabold text-sm bg-regen-green text-white hover:opacity-95 shadow-sm">
            Ver treinamentos <span aria-hidden="true">üéì</span>
          </button>
          <a href="#dados"
            class="px-4 py-2 rounded-2xl font-extrabold text-sm bg-white/80 border border-regen-blue/15 text-black/80 hover:-translate-y-[1px] hover:shadow-soft transition">
            Ver indicadores <span aria-hidden="true">üìä</span>
          </a>
        </div>
      </article>
    </div>
  </div>
</section>


    <!-- ‚úÖ CRGRs (SE√á√ÉO COMPLETA) -->
    <section id="crgr" data-reveal class="mt-6 rounded-[32px] border border-regen-blue/10 bg-white/65 shadow-[0_22px_56px_rgba(13,59,102,.12)] p-5 md:p-6 relative overflow-hidden">
      <div class="absolute inset-[-160px] opacity-90 pointer-events-none"
        style="background:
          radial-gradient(circle at 20% 30%, rgba(76,175,143,.22), transparent 55%),
          radial-gradient(circle at 85% 25%, rgba(13,59,102,.18), transparent 56%),
          radial-gradient(circle at 60% 95%, rgba(242,201,76,.18), transparent 56%);
          transform: rotate(-8deg);"></div>

      <div class="relative z-[1] grid grid-cols-1 lg:grid-cols-2 gap-4 items-start">
        <div>
          <div class="inline-flex items-center gap-2 px-3 py-2 rounded-full bg-white/70 border border-regen-blue/15 text-regen-blue font-black text-xs w-fit">
            üìç CRGR no territ√≥rio
          </div>

          <h2 class="mt-3 font-poppins tracking-tight text-2xl md:text-[26px]">Rede CRGR (piloto Porto Alegre)</h2>
          <p class="mt-2 text-sm md:text-[13.5px] leading-relaxed text-black/80 max-w-[72ch]">
            CRGR √© o <strong>Centro de Refer√™ncia na Gest√£o de Res√≠duos</strong> ‚Äî um ponto local que fortalece a organiza√ß√£o,
            a reciclagem e a resposta a emerg√™ncias clim√°ticas no territ√≥rio.
            <br><br>
            Aqui est√£o os <strong>3 CRGRs pilotos</strong> integrados ao Hub (com mapa e dados b√°sicos para navega√ß√£o).
          </p>

          <div class="mt-4 flex flex-wrap gap-2">
            <button data-open-tab="tab-map"
              class="px-4 py-2 rounded-2xl font-extrabold text-sm bg-white/80 border border-regen-blue/15 text-regen-blue hover:-translate-y-[1px] hover:shadow-soft transition">
              Abrir mapa agora <span aria-hidden="true">‚Üí</span>
            </button>
            <a href="#dados"
              class="px-4 py-2 rounded-2xl font-extrabold text-sm bg-regen-green/10 border border-regen-green/20 text-regen-green hover:-translate-y-[1px] hover:shadow-soft transition">
              Ver indicadores <span aria-hidden="true">‚Üò</span>
            </a>
          </div>
        </div>

        <aside class="rounded-xxl border border-regen-blue/10 bg-white/70 shadow-[0_16px_38px_rgba(13,59,102,.10)] p-4">
          <strong class="block font-poppins tracking-tight mb-2">CRGRs conectados</strong>

          <div class="grid gap-3">
            <!-- COOADESC -->
            <article class="rounded-xxl border border-regen-blue/10 bg-white/80 p-4 hover:-translate-y-[2px] hover:shadow-soft transition">
              <div class="flex items-start justify-between gap-3">
                <div>
                  <div class="font-semibold text-regen-blue">COOADESC (Farrapos)</div>
                  <div class="text-sm text-black/75 mt-1">
                    Rua Seis (Vila Esperan√ßa), 113 ‚Ä¢ CEP 90250-000
                  </div>
                  <div class="text-xs text-muted mt-2">Lat/Lng: -30.003, -51.206</div>
                </div>
                <button type="button"
                  class="px-3 py-2 rounded-xl bg-regen-bg border border-slate-200 text-sm font-bold hover:bg-white"
                  data-focus-point="cooadesc">
                  Ver no mapa
                </button>
              </div>
            </article>

            <!-- Vila Pinto -->
            <article class="rounded-xxl border border-regen-blue/10 bg-white/80 p-4 hover:-translate-y-[2px] hover:shadow-soft transition">
              <div class="flex items-start justify-between gap-3">
                <div>
                  <div class="font-semibold text-regen-blue">Vila Pinto (Bom Jesus / Jardim Carvalho)</div>
                  <div class="text-sm text-black/75 mt-1">
                    Regi√£o da Rua Bom Jesus (aprox.)
                  </div>
                  <div class="text-xs text-muted mt-2">Lat/Lng: -30.036111, -51.158333</div>
                </div>
                <button type="button"
                  class="px-3 py-2 rounded-xl bg-regen-bg border border-slate-200 text-sm font-bold hover:bg-white"
                  data-focus-point="vilapinto">
                  Ver no mapa
                </button>
              </div>
            </article>

            <!-- Cooperilhas -->
            <article class="rounded-xxl border border-regen-blue/10 bg-white/80 p-4 hover:-translate-y-[2px] hover:shadow-soft transition">
              <div class="flex items-start justify-between gap-3">
                <div>
                  <div class="font-semibold text-regen-blue">Cooperilhas (Floresta)</div>
                  <div class="text-sm text-black/75 mt-1">
                    Rua Para√≠ba, 177 ‚Ä¢ CEP 90220-001
                  </div>
                  <div class="text-xs text-muted mt-2">Lat/Lng: -30.016667, -51.216667</div>
                </div>
                <button type="button"
                  class="px-3 py-2 rounded-xl bg-regen-bg border border-slate-200 text-sm font-bold hover:bg-white"
                  data-focus-point="cooperilhas">
                  Ver no mapa
                </button>
              </div>
            </article>
          </div>

          <div class="mt-4 p-3 rounded-2xl bg-regen-green/10 border border-regen-green/20">
            <div class="text-sm font-semibold text-regen-green">Pr√≥ximo passo</div>
            <div class="text-sm text-black/75 mt-1">
              Integrar lista de pontos de coleta por CRGR (JSON/API) e filtro por tipo de res√≠duo.
            </div>
          </div>
        </aside>
      </div>
    </section>

    <!-- DASHBOARD -->
    <section id="dados" data-reveal class="mt-6 rounded-[32px] border border-regen-blue/10 bg-white/65 shadow-[0_22px_56px_rgba(13,59,102,.12)] p-5 md:p-6 relative overflow-hidden">
      <div class="absolute inset-[-180px] opacity-90 pointer-events-none"
        style="background:
          radial-gradient(circle at 20% 25%, rgba(13,59,102,.18), transparent 55%),
          radial-gradient(circle at 85% 22%, rgba(76,175,143,.22), transparent 55%),
          radial-gradient(circle at 60% 95%, rgba(242,201,76,.18), transparent 56%);
          transform: rotate(-7deg);"></div>

      <div class="relative z-[1]">
        <div class="inline-flex items-center gap-2 px-3 py-2 rounded-full bg-regen-green/10 border border-regen-green/20 text-regen-green font-black text-xs w-fit">
          üìä Dados & Relat√≥rios
        </div>

        <div class="mt-3 flex flex-wrap items-end justify-between gap-3">
          <div>
            <h2 class="font-poppins tracking-tight text-2xl md:text-[26px]">Resultados que importam</h2>
            <p class="mt-1 text-sm md:text-[13.5px] text-black/75 max-w-[72ch]">
              N√∫meros que ajudam a entender como os territ√≥rios est√£o avan√ßando na gest√£o de res√≠duos
            </p>
          </div>

          <a href="dashboard.html"
             class="inline-flex items-center gap-2 px-4 py-2 rounded-2xl font-extrabold text-sm bg-white/80 border border-regen-blue/15 text-regen-blue
                    hover:-translate-y-[1px] hover:shadow-soft transition">
            Ver dashboard completo <span aria-hidden="true">‚Üó</span>
          </a>
        </div>

        <div class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
          <div class="rounded-xxl border border-regen-blue/10 bg-white/75 shadow-[0_18px_42px_rgba(13,59,102,.10)] p-4 hover:-translate-y-[3px] hover:shadow-[0_26px_70px_rgba(13,59,102,.14)] hover:border-regen-green/20 transition">
            <div class="text-xs font-bold text-black/70">CRGR ativos</div>
            <div class="font-poppins font-semibold text-2xl mt-1"><span class="kcount" data-count="3">0</span></div>
            <div class="text-xs text-muted mt-1">CRGR pilotos conectados no Hub.</div>
          </div>
          <div class="rounded-xxl border border-regen-blue/10 bg-white/75 shadow-[0_18px_42px_rgba(13,59,102,.10)] p-4 hover:-translate-y-[3px] hover:shadow-[0_26px_70px_rgba(13,59,102,.14)] hover:border-regen-green/20 transition">
            <div class="text-xs font-bold text-black/70">Usu√°rios cadastrados</div>
            <div class="font-poppins font-semibold text-2xl mt-1"><span class="kcount" data-count="684">0</span></div>
            <div class="text-xs text-muted mt-1">Cooperativas, cidad√£os, t√©cnicos, gestores e brigadistas.</div>
          </div>
          <div class="rounded-xxl border border-regen-blue/10 bg-white/75 shadow-[0_18px_42px_rgba(13,59,102,.10)] p-4 hover:-translate-y-[3px] hover:shadow-[0_26px_70px_rgba(13,59,102,.14)] hover:border-regen-green/20 transition">
            <div class="text-xs font-bold text-black/70">Planos em andamento</div>
            <div class="font-poppins font-semibold text-2xl mt-1"><span class="kcount" data-count="38">0</span></div>
            <div class="text-xs text-muted mt-1">Metas e prazos sendo acompanhados pelos territ√≥rios.</div>
          </div>
          <div class="rounded-xxl border border-regen-blue/10 bg-white/75 shadow-[0_18px_42px_rgba(13,59,102,.10)] p-4 hover:-translate-y-[3px] hover:shadow-[0_26px_70px_rgba(13,59,102,.14)] hover:border-regen-green/20 transition">
            <div class="text-xs font-bold text-black/70">Indicadores em alerta</div>
            <div class="font-poppins font-semibold text-2xl mt-1"><span class="kcount" data-count="5">0</span></div>
            <div class="text-xs text-muted mt-1">Itens cr√≠ticos que pedem aten√ß√£o e coordena√ß√£o.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ‚úÖ PAINEL TABS -->
    <section class="mt-6" aria-label="Painel do territ√≥rio" data-reveal>
      <div data-tabs-card class="bg-white/80 border border-regen-blue/10 rounded-[32px] shadow-soft overflow-hidden">
        <!-- Tabs Header -->
        <div class="tabs-topbar">
          <div class="px-4 py-3 flex items-center gap-3 flex-wrap">
            <div class="min-w-max inline-flex items-center gap-2 px-3 py-2 rounded-full bg-regen-green/10 border border-regen-green/20 text-regen-green font-black text-xs">
              üß≠ Painel do territ√≥rio
            </div>

            <div class="flex-1"></div>

            <div class="w-full md:w-auto overflow-auto nice-scroll">
              <div class="flex items-center gap-2 min-w-max">
                <button class="tab-btn px-3 py-2 rounded-2xl text-sm font-extrabold border border-regen-blue/10 bg-white hover:bg-regen-bg"
                        data-open-tab="tab-overview" aria-controls="tab-overview" aria-selected="true">
                  üì∞ Comunicados
                </button>
                <button class="tab-btn px-3 py-2 rounded-2xl text-sm font-extrabold border border-regen-blue/10 bg-white hover:bg-regen-bg"
                        data-open-tab="tab-services" aria-controls="tab-services" aria-selected="false">
                  ‚ôª Servi√ßos
                </button>
                <button class="tab-btn px-3 py-2 rounded-2xl text-sm font-extrabold border border-regen-blue/10 bg-white hover:bg-regen-bg"
                        data-open-tab="tab-map" aria-controls="tab-map" aria-selected="false">
                  üó∫ Mapa
                </button>
                <button class="tab-btn px-3 py-2 rounded-2xl text-sm font-extrabold border border-regen-blue/10 bg-white hover:bg-regen-bg"
                        data-open-tab="tab-calendar" aria-controls="tab-calendar" aria-selected="false">
                  üìÖ Calend√°rio
                </button>
                <button class="tab-btn px-3 py-2 rounded-2xl text-sm font-extrabold border border-regen-blue/10 bg-white hover:bg-regen-bg"
                        data-open-tab="tab-trainings" aria-controls="tab-trainings" aria-selected="false">
                  üéì Treinamentos
                </button>
                <button class="tab-btn px-3 py-2 rounded-2xl text-sm font-extrabold border border-regen-yellow/40 bg-gradient-to-br from-regen-yellow to-[#ffe08a] text-black/90 hover:brightness-[1.02]"
                        data-open-tab="tab-special" aria-controls="tab-special" aria-selected="false">
                  üöö Coleta especial
                </button>
                <button class="tab-btn px-3 py-2 rounded-2xl text-sm font-extrabold border border-regen-blue/10 bg-white hover:bg-regen-bg"
                        data-open-tab="tab-ombudsman" aria-controls="tab-ombudsman" aria-selected="false">
                  üó£ Ouvidoria
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Content -->
        <div class="p-5">
          <!-- TAB: Overview -->
          <div id="tab-overview" class="tab-panel">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
              <div class="lg:col-span-2">
                <div class="flex items-center justify-between">
                  <div>
                    <h2 class="text-base font-semibold text-regen-blue">Comunicados da cooperativa</h2>
                    <p class="text-sm text-slate-600 mt-1">Avisos e atualiza√ß√µes do territ√≥rio.</p>
                  </div>
                  <div class="hidden sm:flex items-center gap-2">
                    <span class="text-xs px-2 py-1 rounded-lg bg-regen-green/10 border border-regen-green/20 text-regen-green">Atual</span>
                    <span class="text-xs px-2 py-1 rounded-lg bg-regen-bg border border-slate-200 text-slate-600">Timeline</span>
                  </div>
                </div>

                <div id="noticesList" class="mt-4 space-y-3"></div>
              </div>

              <div>
                <div class="rounded-2xl border border-slate-200 bg-regen-bg p-4">
                  <h3 class="text-sm font-semibold text-regen-blue">Resumo r√°pido</h3>

                  <div class="mt-3 space-y-2 text-sm">
                    <div class="flex justify-between gap-3">
                      <span class="text-slate-600">Materiais aceitos</span>
                      <span id="summaryAccepted" class="font-semibold text-regen-blue">‚Äî</span>
                    </div>
                    <div class="flex justify-between gap-3">
                      <span class="text-slate-600">N√£o aceitos</span>
                      <span id="summaryNotAccepted" class="font-semibold text-regen-blue">‚Äî</span>
                    </div>
                    <div class="flex justify-between gap-3">
                      <span class="text-slate-600">Pontos no mapa</span>
                      <span id="summaryPoints" class="font-semibold text-regen-blue">‚Äî</span>
                    </div>
                  </div>

                  <div class="mt-4 grid grid-cols-2 gap-2">
                    <button data-open-tab="tab-services" class="px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm hover:bg-regen-bg">
                      Servi√ßos
                    </button>
                    <button data-open-tab="tab-map" class="px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm hover:bg-regen-bg">
                      Mapa
                    </button>
                  </div>

                  <div class="mt-4 p-3 rounded-2xl bg-white border border-slate-200">
                    <div class="text-xs font-semibold text-slate-500">Atalho r√°pido</div>
                    <button data-open-tab="tab-special" class="mt-2 w-full px-3 py-2 rounded-xl bg-regen-green text-white text-sm hover:opacity-95">
                      üöö Cadastrar coleta especial
                    </button>
                  </div>

                  <div class="mt-3 grid grid-cols-2 gap-2">
                    <button data-open-tab="tab-calendar" class="px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm hover:bg-regen-bg">
                      Calend√°rio
                    </button>
                    <button data-open-tab="tab-ombudsman" class="px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm hover:bg-regen-bg">
                      Ouvidoria
                    </button>
                  </div>

                  <div class="mt-3">
                    <button data-open-tab="tab-trainings" class="w-full px-3 py-2 rounded-xl bg-white border border-slate-200 text-sm hover:bg-regen-bg">
                      Treinamentos
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- TAB: Services -->
          <div id="tab-services" class="tab-panel hidden">
            <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-3">
              <div>
                <h2 class="text-base font-semibold text-regen-blue">Servi√ßos e materiais</h2>
                <p class="text-sm text-slate-600 mt-1">O que a CRGR oferece e como participar.</p>
              </div>
              <div class="text-xs text-slate-500">
                Dica: prefira res√≠duos <span class="font-semibold text-regen-green">limpos e secos</span>.
              </div>
            </div>

            <div class="mt-5 grid grid-cols-1 lg:grid-cols-2 gap-4">
              <div class="rounded-2xl border border-slate-200 p-4 bg-white">
                <div class="flex items-center justify-between">
                  <h3 class="text-sm font-semibold text-regen-blue">Materiais aceitos</h3>
                  <span class="text-xs px-2 py-1 rounded-lg bg-regen-green/10 border border-regen-green/20 text-regen-green">OK</span>
                </div>
                <ul id="acceptedList" class="mt-3 text-sm text-slate-700 list-disc pl-5 space-y-1"></ul>
              </div>

              <div class="rounded-2xl border border-slate-200 p-4 bg-white">
                <div class="flex items-center justify-between">
                  <h3 class="text-sm font-semibold text-regen-blue">Materiais n√£o aceitos</h3>
                  <span class="text-xs px-2 py-1 rounded-lg bg-regen-yellow/20 border border-regen-yellow text-regen-graphite">Aten√ß√£o</span>
                </div>
                <ul id="notAcceptedList" class="mt-3 text-sm text-slate-700 list-disc pl-5 space-y-1"></ul>
              </div>

              <div class="rounded-2xl border border-slate-200 p-4 bg-regen-bg lg:col-span-2">
                <div class="flex items-center justify-between">
                  <h3 class="text-sm font-semibold text-regen-blue">Oferta de servi√ßos</h3>
                  <span class="text-xs px-2 py-1 rounded-lg bg-white border border-slate-200 text-slate-600">Cards</span>
                </div>
                <div id="servicesCards" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"></div>
              </div>
            </div>
          </div>

          <!-- TAB: Map -->
          <div id="tab-map" class="tab-panel hidden">
            <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-3">
              <div>
                <h2 class="text-base font-semibold text-regen-blue">Mapa de pontos de coleta</h2>
                <p class="text-sm text-slate-600 mt-1">Veja no mapa e filtre por tipo de res√≠duo.</p>
              </div>

              <div class="flex flex-wrap gap-2">
                <select id="filterType" class="px-3 py-2 rounded-xl border border-slate-200 text-sm bg-white">
                  <option value="all">Todos os tipos</option>
                </select>

                <button id="btnUseMyLocation" class="px-3 py-2 rounded-xl border border-slate-200 text-sm hover:bg-regen-bg">
                  üìç Perto de mim
                </button>
              </div>
            </div>

            <div class="mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4">
              <div class="lg:col-span-2 rounded-2xl border border-slate-200 overflow-hidden bg-white">
                <div id="map" class="w-full"></div>
              </div>

              <div class="rounded-2xl border border-slate-200 p-4 bg-white">
                <div class="flex items-center justify-between">
                  <h3 class="text-sm font-semibold text-regen-blue">Lista de pontos</h3>
                  <span id="pointsBadge" class="text-xs px-2 py-1 rounded-lg bg-regen-bg border border-slate-200 text-slate-600">0</span>
                </div>
                <div id="pointsList" class="mt-3 space-y-3 max-h-[440px] overflow-auto pr-1 nice-scroll"></div>
              </div>
            </div>
          </div>

          <!-- TAB: Calendar -->
          <div id="tab-calendar" class="tab-panel hidden">
            <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-3">
              <div>
                <h2 class="text-base font-semibold text-regen-blue">Calend√°rio de coletas</h2>
                <p class="text-sm text-slate-600 mt-1">Datas por tipo e regi√£o/rota.</p>
              </div>

              <div class="flex flex-wrap gap-2">
                <select id="filterPickupType" class="px-3 py-2 rounded-xl border border-slate-200 text-sm bg-white">
                  <option value="all">Todos</option>
                  <option value="seletiva">Seletiva</option>
                  <option value="especial">Especial</option>
                  <option value="mutirao">Mutir√£o</option>
                </select>
                <input id="filterPickupQuery" class="px-3 py-2 rounded-xl border border-slate-200 text-sm bg-white" placeholder="Filtrar por bairro/rota..." />
              </div>
            </div>

            <div class="mt-4 rounded-2xl border border-slate-200 overflow-hidden bg-white">
              <div class="px-4 py-3 bg-regen-bg border-b border-slate-200 text-sm font-semibold text-regen-blue">
                Pr√≥ximos eventos
              </div>
              <div id="calendarList" class="divide-y divide-slate-200"></div>
            </div>
          </div>

          <!-- TAB: Trainings -->
          <div id="tab-trainings" class="tab-panel hidden">
            <div class="flex items-start justify-between flex-wrap gap-3">
              <div>
                <h2 class="text-base font-semibold text-regen-blue">Treinamentos dispon√≠veis</h2>
                <p class="text-sm text-slate-600 mt-1">Inscreva-se e acompanhe seu status.</p>
              </div>

              <input id="filterTraining" class="px-3 py-2 rounded-xl border border-slate-200 text-sm bg-white" placeholder="Buscar treinamento..." />
            </div>

            <div id="trainingsGrid" class="mt-5 grid grid-cols-1 md:grid-cols-2 gap-4"></div>
          </div>

          <!-- TAB: Special pickup -->
          <div id="tab-special" class="tab-panel hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
              <div class="lg:col-span-2">
                <h2 class="text-base font-semibold text-regen-blue">Cadastro para coleta seletiva especial</h2>
                <p class="text-sm text-slate-600 mt-1">
                  Para grandes volumes, a√ß√µes espec√≠ficas ou materiais que exigem agendamento.
                </p>

                <form id="specialForm" class="mt-5 space-y-4">
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label class="text-sm font-medium">Nome</label>
                      <input id="specialName" class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm" placeholder="Seu nome" required />
                    </div>
                    <div>
                      <label class="text-sm font-medium">Telefone/WhatsApp</label>
                      <input id="specialPhone" class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm" placeholder="(51) 99999-9999" required />
                    </div>
                  </div>

                  <div>
                    <label class="text-sm font-medium">Endere√ßo</label>
                    <input id="specialAddress" class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm" placeholder="Rua, n√∫mero, bairro" required />
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label class="text-sm font-medium">Tipo de material</label>
                      <select id="specialMaterial" class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm"></select>
                    </div>
                    <div>
                      <label class="text-sm font-medium">Volume estimado</label>
                      <select id="specialVolume" class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm">
                        <option value="pequeno">Pequeno (at√© 1 saco)</option>
                        <option value="medio">M√©dio (2‚Äì5 sacos)</option>
                        <option value="grande">Grande (mais de 5 sacos)</option>
                      </select>
                    </div>
                  </div>

                  <div>
                    <label class="text-sm font-medium">Observa√ß√µes</label>
                    <textarea id="specialNotes" class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm" rows="3"
                      placeholder="Ex: melhor hor√°rio para contato, ponto de refer√™ncia..."></textarea>
                  </div>

                  <div class="flex flex-wrap gap-2">
                    <button class="px-4 py-2 rounded-xl bg-regen-green text-white text-sm hover:opacity-95 shadow-sm" type="submit">
                      Enviar solicita√ß√£o
                    </button>
                    <button class="px-4 py-2 rounded-xl border border-slate-200 text-sm hover:bg-regen-bg" type="button" id="btnViewMySpecialRequests">
                      Ver minhas solicita√ß√µes
                    </button>
                  </div>
                </form>

                <div id="specialResult" class="mt-4"></div>
              </div>

              <div class="rounded-2xl border border-slate-200 bg-regen-bg p-4">
                <h3 class="text-sm font-semibold text-regen-blue">Como funciona</h3>
                <ol class="mt-3 list-decimal pl-5 text-sm text-slate-700 space-y-2">
                  <li>Preencha o formul√°rio com endere√ßo e material.</li>
                  <li>A cooperativa analisa disponibilidade e rota.</li>
                  <li>Voc√™ recebe retorno com status e orienta√ß√µes.</li>
                </ol>

                <div class="mt-4 p-3 rounded-2xl bg-white border border-slate-200">
                  <div class="font-semibold text-sm text-regen-blue">Dica</div>
                  <div class="mt-1 text-sm text-slate-600">
                    Vidros devem estar embalados com seguran√ßa.
                  </div>
                </div>
              </div>
            </div>

            <div class="mt-6 rounded-2xl border border-slate-200 overflow-hidden bg-white">
              <div class="px-4 py-3 bg-regen-bg border-b border-slate-200 text-sm font-semibold text-regen-blue">
                Minhas solicita√ß√µes (demo em mem√≥ria)
              </div>
              <div id="specialRequestsList" class="divide-y divide-slate-200"></div>
            </div>
          </div>

          <!-- TAB: Ombudsman -->
          <div id="tab-ombudsman" class="tab-panel hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
              <div class="lg:col-span-2">
                <h2 class="text-base font-semibold text-regen-blue">Sugest√µes e reclama√ß√µes</h2>
                <p class="text-sm text-slate-600 mt-1">
                  Envie sua mensagem. Voc√™ receber√° um n√∫mero de protocolo para acompanhamento.
                </p>

                <form id="ticketForm" class="mt-5 space-y-4">
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label class="text-sm font-medium">Tipo</label>
                      <select id="ticketType" class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm">
                        <option value="sugestao">Sugest√£o</option>
                        <option value="reclamacao">Reclama√ß√£o</option>
                        <option value="duvida">D√∫vida</option>
                      </select>
                    </div>
                    <div>
                      <label class="text-sm font-medium">Assunto</label>
                      <input id="ticketSubject" class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm" placeholder="Ex: Coleta atrasada na rota X" required />
                    </div>
                  </div>

                  <div>
                    <label class="text-sm font-medium">Mensagem</label>
                    <textarea id="ticketMessage" class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-200 bg-white text-sm" rows="4"
                      placeholder="Descreva o que aconteceu e, se poss√≠vel, informe local e data." required></textarea>
                  </div>

                  <div class="flex flex-wrap gap-2">
                    <button class="px-4 py-2 rounded-xl bg-regen-blue text-white text-sm hover:opacity-95 shadow-sm" type="submit">
                      Enviar
                    </button>
                    <button class="px-4 py-2 rounded-xl border border-slate-200 text-sm hover:bg-regen-bg" type="button" id="btnViewMyTickets">
                      Ver meus protocolos
                    </button>
                  </div>
                </form>

                <div id="ticketResult" class="mt-4"></div>
              </div>

              <div class="rounded-2xl border border-slate-200 bg-regen-bg p-4">
                <h3 class="text-sm font-semibold text-regen-blue">O que acontece depois</h3>
                <ul class="mt-3 list-disc pl-5 text-sm text-slate-700 space-y-2">
                  <li>O chamado entra como <span class="font-semibold">Aberto</span>.</li>
                  <li>A equipe responde e pode solicitar detalhes.</li>
                  <li>Quando resolvido, o status muda para <span class="font-semibold">Encerrado</span>.</li>
                </ul>
                <div class="mt-4 p-3 rounded-2xl bg-white border border-slate-200">
                  <div class="text-xs font-semibold text-slate-500">Boas pr√°ticas</div>
                  <div class="mt-1 text-sm text-slate-600">
                    Informe data, bairro/rota e, se poss√≠vel, ponto de refer√™ncia.
                  </div>
                </div>
              </div>
            </div>

            <div class="mt-6 rounded-2xl border border-slate-200 overflow-hidden bg-white">
              <div class="px-4 py-3 bg-regen-bg border-b border-slate-200 text-sm font-semibold text-regen-blue">
                Meus protocolos (demo em mem√≥ria)
              </div>
              <div id="ticketsList" class="divide-y divide-slate-200"></div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- ‚úÖ PARCERIAS (SE√á√ÉO COMPLETA) -->
    <section id="parcerias" data-reveal class="mt-6 rounded-[32px] border border-regen-blue/10 bg-white/65 shadow-[0_22px_56px_rgba(13,59,102,.12)] p-5 md:p-6 relative overflow-hidden">
      <div class="absolute inset-[-160px] opacity-90 pointer-events-none"
        style="background:
          radial-gradient(circle at 20% 25%, rgba(13,59,102,.18), transparent 55%),
          radial-gradient(circle at 85% 22%, rgba(242,201,76,.18), transparent 55%),
          radial-gradient(circle at 55% 95%, rgba(76,175,143,.20), transparent 56%);
          transform: rotate(-7deg);"></div>

      <div class="relative z-[1]">
        <div class="inline-flex items-center gap-2 px-3 py-2 rounded-full bg-regen-green/10 border border-regen-green/20 text-regen-green font-black text-xs w-fit">
          ü§ù Parcerias
        </div>

        <div class="mt-3 flex flex-wrap items-end justify-between gap-3">
          <div>
            <h2 class="font-poppins tracking-tight text-2xl md:text-[26px]">Constru√≠do em rede</h2>
            <p class="mt-1 text-sm md:text-[13.5px] text-black/75 max-w-[78ch]">
              O Hub √© constru√≠do com institui√ß√µes, redes e apoiadores comprometidos com desenvolvimento territorial,
              justi√ßa clim√°tica e economia circular.
            </p>
          </div>

          <a href="parcerias.html"
             class="inline-flex items-center gap-2 px-4 py-2 rounded-2xl font-extrabold text-sm bg-white/80 border border-regen-blue/15 text-regen-blue
                    hover:-translate-y-[1px] hover:shadow-soft transition">
            Ver todas as parcerias <span aria-hidden="true">‚Üó</span>
          </a>
        </div>

        <!-- Grid de logos / placeholders -->
        <div class="mt-5 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3">
          <div class="h-16 rounded-2xl border border-dashed border-regen-blue/20 bg-white/75 grid place-items-center font-black text-xs text-regen-blue/80 hover:-translate-y-[2px] hover:shadow-soft hover:border-regen-green/20 transition">
            M√£os Verdes
          </div>
          <div class="h-16 rounded-2xl border border-dashed border-regen-blue/20 bg-white/75 grid place-items-center font-black text-xs text-regen-blue/80 hover:-translate-y-[2px] hover:shadow-soft hover:border-regen-green/20 transition">
            H√©lice
          </div>
          <div class="h-16 rounded-2xl border border-dashed border-regen-blue/20 bg-white/75 grid place-items-center font-black text-xs text-regen-blue/80 hover:-translate-y-[2px] hover:shadow-soft hover:border-regen-green/20 transition">
            VAUS
          </div>
    
        </div>

     
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" data-reveal class="mt-6 rounded-[32px] border border-regen-blue/10 bg-white/65 shadow-[0_22px_56px_rgba(13,59,102,.12)] p-5 md:p-6 relative overflow-hidden">
      <div class="absolute inset-[-170px] opacity-90 pointer-events-none"
        style="background:
          radial-gradient(circle at 18% 30%, rgba(76,175,143,.20), transparent 55%),
          radial-gradient(circle at 85% 25%, rgba(13,59,102,.18), transparent 55%),
          radial-gradient(circle at 58% 95%, rgba(242,201,76,.18), transparent 56%);
          transform: rotate(-8deg);"></div>

      <div class="relative z-[1]">
        <div class="inline-flex items-center gap-2 px-3 py-2 rounded-full bg-regen-green/10 border border-regen-green/20 text-regen-green font-black text-xs w-fit">
          ‚ùì D√∫vidas frequentes
        </div>

        <h2 class="mt-3 font-poppins tracking-tight text-2xl md:text-[26px]">Perguntas comuns</h2>
        <p class="mt-1 text-sm md:text-[13.5px] text-black/75 max-w-[78ch]">
          Respostas r√°pidas para orientar o uso do Hub e como ele se organiza por territ√≥rio/CRGR.
        </p>

        <div class="mt-4 grid gap-3">
          <details class="rounded-2xl border border-regen-blue/10 bg-white/75 shadow-[0_14px_34px_rgba(13,59,102,.10)] p-4 hover:-translate-y-[2px] hover:shadow-[0_22px_52px_rgba(13,59,102,.12)] hover:border-regen-green/20 transition">
            <summary class="cursor-pointer font-black text-sm flex items-center justify-between gap-3">
              Quem pode acessar a plataforma?
              <span class="w-8 h-8 rounded-xl border border-regen-blue/15 bg-white/80 grid place-items-center">‚åÑ</span>
            </summary>
            <p class="mt-3 text-sm text-black/75 leading-relaxed">
              Qualquer pessoa pode acessar os indicadores gerais. Para ter perfis cadastrados, √© necess√°rio que o territ√≥rio tenha um CRGR.
            </p>
          </details>

          <details class="rounded-2xl border border-regen-blue/10 bg-white/75 shadow-[0_14px_34px_rgba(13,59,102,.10)] p-4 hover:-translate-y-[2px] hover:shadow-[0_22px_52px_rgba(13,59,102,.12)] hover:border-regen-green/20 transition">
            <summary class="cursor-pointer font-black text-sm flex items-center justify-between gap-3">
              Esses dados podem apoiar pol√≠ticas p√∫blicas?
              <span class="w-8 h-8 rounded-xl border border-regen-blue/15 bg-white/80 grid place-items-center">‚åÑ</span>
            </summary>
            <p class="mt-3 text-sm text-black/75 leading-relaxed">
              Sim. Os dados ajudam no diagn√≥stico, planejamento e monitoramento de a√ß√µes e pol√≠ticas p√∫blicas.
            </p>
          </details>

          <details class="rounded-2xl border border-regen-blue/10 bg-white/75 shadow-[0_14px_34px_rgba(13,59,102,.10)] p-4 hover:-translate-y-[2px] hover:shadow-[0_22px_52px_rgba(13,59,102,.12)] hover:border-regen-green/20 transition">
            <summary class="cursor-pointer font-black text-sm flex items-center justify-between gap-3">
              Quem alimenta os dados da plataforma?
              <span class="w-8 h-8 rounded-xl border border-regen-blue/15 bg-white/80 grid place-items-center">‚åÑ</span>
            </summary>
            <p class="mt-3 text-sm text-black/75 leading-relaxed">
              Cooperativas, equipes t√©cnicas, gestores p√∫blicos e parceiros do projeto.
            </p>
          </details>

          <details class="rounded-2xl border border-regen-blue/10 bg-white/75 shadow-[0_14px_34px_rgba(13,59,102,.10)] p-4 hover:-translate-y-[2px] hover:shadow-[0_22px_52px_rgba(13,59,102,.12)] hover:border-regen-green/20 transition">
            <summary class="cursor-pointer font-black text-sm flex items-center justify-between gap-3">
              Com que frequ√™ncia os dados s√£o atualizados?
              <span class="w-8 h-8 rounded-xl border border-regen-blue/15 bg-white/80 grid place-items-center">‚åÑ</span>
            </summary>
            <p class="mt-3 text-sm text-black/75 leading-relaxed">
              Periodicamente, conforme envio e valida√ß√£o das informa√ß√µes.
            </p>
          </details>

          <details class="rounded-2xl border border-regen-blue/10 bg-white/75 shadow-[0_14px_34px_rgba(13,59,102,.10)] p-4 hover:-translate-y-[2px] hover:shadow-[0_22px_52px_rgba(13,59,102,.12)] hover:border-regen-green/20 transition">
            <summary class="cursor-pointer font-black text-sm flex items-center justify-between gap-3">
              Sou uma cooperativa: como posso me envolver?
              <span class="w-8 h-8 rounded-xl border border-regen-blue/15 bg-white/80 grid place-items-center">‚åÑ</span>
            </summary>
            <p class="mt-3 text-sm text-black/75 leading-relaxed">
              Entre em contato conosco pelo email: <strong>queroumCRGR@hub.br</strong>
            </p>
          </details>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="mt-8 text-sm text-black/70">
      <div class="pt-4 border-t border-regen-blue/10 flex flex-wrap items-center justify-between gap-3">
        <div>
          <div class="font-bold text-black/80">Hub Resili√™ncia Clim√°tica ‚Ä¢ Plataforma Regenera</div>
          <div class="mt-1">¬© <span id="year"></span> ‚Ä¢ Todos os direitos reservados.</div>
        </div>
        <div class="flex flex-wrap gap-4 font-bold">
          <a class="hover:text-regen-green" href="#top">Voltar ao topo</a>
          <a class="hover:text-regen-green" href="#crgr">CRGRs</a>
          <a class="hover:text-regen-green" href="#parcerias">Parcerias</a>
          <a class="hover:text-regen-green" href="#faq">FAQ</a>
        </div>
      </div>
    </footer>
  </main>

  <script>
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));

    // Cursor glow
    const glow = $("#cursorGlow");
    const motionOK = !window.matchMedia("(prefers-reduced-motion: reduce)").matches;
    const coarsePointer = window.matchMedia("(pointer: coarse)").matches;
    if (motionOK && !coarsePointer){
      window.addEventListener("mousemove", (e) => {
        glow.style.left = e.clientX + "px";
        glow.style.top = e.clientY + "px";
        glow.style.opacity = "1";
      });
      window.addEventListener("mouseleave", () => glow.style.opacity = "0");
    }

    // Reveal
    const revealEls = $$("[data-reveal]");
    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting){
          entry.target.classList.add("in");
          io.unobserve(entry.target);
        }
      });
    }, { threshold: 0.12 });
    revealEls.forEach(el => io.observe(el));

    // Smooth scroll
    $$('a[href^="#"]').forEach(a => {
      a.addEventListener("click", (e) => {
        const id = a.getAttribute("href");
        const target = document.querySelector(id);
        if (!target) return;
        e.preventDefault();
        target.scrollIntoView({ behavior: "smooth", block: "start" });
      });
    });

    // Counters
    const counters = $$(".kcount");
    let counted = false;
    function animateCounters(list){
      list.forEach(el => {
        const end = Number(el.dataset.count || "0");
        const duration = 900 + Math.random() * 450;
        const t0 = performance.now();
        function tick(t){
          const p = Math.min((t - t0) / duration, 1);
          const eased = 1 - Math.pow(1 - p, 3);
          el.textContent = String(Math.round(end * eased));
          if (p < 1) requestAnimationFrame(tick);
        }
        requestAnimationFrame(tick);
      });
    }
    const heroSection = document.querySelector("section");
    new IntersectionObserver((entries, obs) => {
      if (!counted && entries.some(e => e.isIntersecting)){
        counted = true;
        animateCounters(counters);
        obs.disconnect();
      }
    }, { threshold: 0.3 }).observe(heroSection);

    // CTA scroll
    $("#btnScroll2")?.addEventListener("click", () => {
      document.querySelector("[data-tabs-card]")?.scrollIntoView({ behavior: "smooth", block: "start" });
    });

    // Login buttons
    const goLogin = () => window.location.href = "login.html";
    $("#btnEntrar")?.addEventListener("click", goLogin);
    $("#btnCadastrar")?.addEventListener("click", goLogin);

    // Footer year
    $("#year").textContent = new Date().getFullYear();

    // Mobile menu
    const menuBtn = $("#menuBtn");
    const mobileNavWrap = $("#mobileNavWrap");
    function isMobileNav(){ return window.matchMedia("(max-width: 767px)").matches; }
    function closeMenu(){
      if(!mobileNavWrap || !menuBtn) return;
      mobileNavWrap.classList.add("hidden");
      menuBtn.setAttribute("aria-expanded", "false");
    }
    function openMenu(){
      if(!mobileNavWrap || !menuBtn) return;
      mobileNavWrap.classList.remove("hidden");
      menuBtn.setAttribute("aria-expanded", "true");
    }
    function toggleMenu(){
      if(!mobileNavWrap || !menuBtn) return;
      const willOpen = mobileNavWrap.classList.contains("hidden");
      willOpen ? openMenu() : closeMenu();
    }
    menuBtn?.addEventListener("click", (e) => { e.stopPropagation(); toggleMenu(); });
    document.addEventListener("click", (e) => {
      if(!isMobileNav()) return;
      if(mobileNavWrap?.classList.contains("hidden")) return;
      const clickedInside = mobileNavWrap.contains(e.target) || menuBtn?.contains(e.target);
      if(!clickedInside) closeMenu();
    });
    document.addEventListener("keydown", (e) => { if(e.key === "Escape") closeMenu(); });
    window.addEventListener("resize", () => { if (!isMobileNav()) closeMenu(); });

    // Tabs
    (function setupTabs(){
      const panels = Array.from(document.querySelectorAll(".tab-panel"));
      const topBtns = Array.from(document.querySelectorAll(".tab-btn"));

      function setActiveButton(tabId){
        topBtns.forEach(b => {
          const active = b.getAttribute("data-open-tab") === tabId;
          b.setAttribute("aria-selected", active ? "true" : "false");
          b.classList.toggle("bg-regen-blue/10", active);
          b.classList.toggle("border-regen-blue/20", active);
        });
      }

      const openTab = (id, scroll=true) => {
        panels.forEach(p => p.classList.toggle("hidden", p.id !== id));
        setActiveButton(id);
        if (scroll){
          const card = document.querySelector("[data-tabs-card]");
          card && card.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      };

      document.addEventListener("click", (e) => {
        const btn = e.target.closest("[data-open-tab]");
        if (!btn) return;
        const id = btn.getAttribute("data-open-tab");
        if (document.getElementById(id)) openTab(id, true);
      });

      if (document.getElementById("tab-overview")) openTab("tab-overview", false);

      // foco r√°pido da se√ß√£o CRGR -> mapa
      document.addEventListener("click", (e) => {
        const b = e.target.closest("[data-focus-point]");
        if (!b) return;
        const id = b.getAttribute("data-focus-point");
        openTab("tab-map", true);
        // o mapa vai focar via evento custom (abaixo)
        setTimeout(() => {
          window.dispatchEvent(new CustomEvent("hub:focusPoint", { detail: { id } }));
        }, 220);
      });
    })();

    // ============================
    // DEMO conte√∫do (comunicados, servi√ßos, calend√°rio, treinamentos, formul√°rios)
    // ============================
    (function seedTerritoryDemo(){
      const notices = [
        { title: "Mutir√£o de limpeza ‚Äî s√°bado", text: "Concentra√ß√£o √†s 8h. Leve luvas e garrafa de √°gua.", tag: "A√ß√£o", date: "Hoje" },
        { title: "Mudan√ßa de hor√°rio", text: "Triagem das 8h √†s 17h (seg‚Äìsex).", tag: "Aviso", date: "Atualiza√ß√£o" },
        { title: "Coleta especial aberta", text: "Agendamentos para grandes volumes via formul√°rio.", tag: "Servi√ßo", date: "Esta semana" },
      ];

      const accepted = ["Papel e papel√£o", "Pl√°sticos (PET, PEAD)", "Metais (alum√≠nio, a√ßo)", "Vidro (embalado com seguran√ßa)"];
      const notAccepted = ["Org√¢nicos", "Res√≠duos hospitalares", "Entulho e volumosos sem agendamento", "Eletr√¥nicos (ver regras locais)"];
      const services = [
        { title: "Coleta seletiva", text: "Rotas por bairro/turno. Consulte o calend√°rio.", badge: "Rota" },
        { title: "Coleta especial", text: "Grandes volumes e materiais espec√≠ficos por agendamento.", badge: "Agendamento" },
        { title: "Educa√ß√£o ambiental", text: "A√ß√µes em escolas e comunidades.", badge: "Forma√ß√£o" },
        { title: "Ponto de entrega", text: "Entrega volunt√°ria de recicl√°veis limpos e secos.", badge: "PEV" },
      ];

      const events = [
        { type:"seletiva", title:"Coleta Seletiva ‚Äî Rota Norte", where:"Bairro Farrapos", when:"Pr√≥xima ter√ßa ‚Ä¢ 08:00" },
        { type:"mutirao",  title:"Mutir√£o Comunit√°rio",         where:"Bom Jesus",     when:"S√°bado ‚Ä¢ 08:00" },
        { type:"especial", title:"Coleta Especial (agendada)",   where:"Sob demanda",   when:"Conforme protocolo" },
      ];

      const trainings = [
        { title:"Triagem segura e eficiente", level:"B√°sico", status:"Dispon√≠vel" },
        { title:"Gest√£o de indicadores (CRGR)", level:"Intermedi√°rio", status:"Dispon√≠vel" },
        { title:"Comunica√ß√£o no territ√≥rio", level:"B√°sico", status:"Em breve" },
        { title:"Resposta clim√°tica e log√≠stica", level:"Avan√ßado", status:"Dispon√≠vel" },
      ];

      const noticesList = document.getElementById("noticesList");
      if (noticesList){
        noticesList.innerHTML = notices.map(n => `
          <div class="rounded-2xl border border-slate-200 bg-white p-4">
            <div class="flex items-start justify-between gap-3">
              <div>
                <div class="text-sm font-semibold text-regen-blue">${n.title}</div>
                <div class="text-sm text-slate-600 mt-1">${n.text}</div>
              </div>
              <div class="text-right">
                <div class="text-xs px-2 py-1 rounded-lg bg-regen-bg border border-slate-200 text-slate-600">${n.tag}</div>
                <div class="text-xs text-slate-400 mt-2">${n.date}</div>
              </div>
            </div>
          </div>
        `).join("");
      }

      const acceptedList = document.getElementById("acceptedList");
      const notAcceptedList = document.getElementById("notAcceptedList");
      if (acceptedList) acceptedList.innerHTML = accepted.map(i => `<li>${i}</li>`).join("");
      if (notAcceptedList) notAcceptedList.innerHTML = notAccepted.map(i => `<li>${i}</li>`).join("");

      const sa = document.getElementById("summaryAccepted");
      const sna = document.getElementById("summaryNotAccepted");
      const sp = document.getElementById("summaryPoints");
      if (sa) sa.textContent = String(accepted.length);
      if (sna) sna.textContent = String(notAccepted.length);
      if (sp) sp.textContent = "3";

      const servicesCards = document.getElementById("servicesCards");
      if (servicesCards){
        servicesCards.innerHTML = services.map(s => `
          <div class="rounded-2xl border border-slate-200 bg-white p-4">
            <div class="flex items-center justify-between gap-3">
              <div class="text-sm font-semibold text-regen-blue">${s.title}</div>
              <span class="text-xs px-2 py-1 rounded-lg bg-regen-green/10 border border-regen-green/20 text-regen-green">${s.badge}</span>
            </div>
            <div class="text-sm text-slate-600 mt-2">${s.text}</div>
          </div>
        `).join("");
      }

      const specialMaterial = document.getElementById("specialMaterial");
      if (specialMaterial){
        specialMaterial.innerHTML = ["Papel/Papel√£o","Pl√°stico","Metal","Vidro","Misto"]
          .map(v => `<option value="${v}">${v}</option>`).join("");
      }

      // Calend√°rio render + filtros
      const calendarList = document.getElementById("calendarList");
      const filterPickupType = document.getElementById("filterPickupType");
      const filterPickupQuery = document.getElementById("filterPickupQuery");

      function renderEvents(){
        if (!calendarList) return;
        const t = filterPickupType?.value || "all";
        const q = (filterPickupQuery?.value || "").toLowerCase().trim();
        const list = events.filter(ev => {
          const okType = t === "all" ? true : ev.type === t;
          const okQuery = !q ? true : (ev.title + " " + ev.where).toLowerCase().includes(q);
          return okType && okQuery;
        });

        calendarList.innerHTML = list.map(e => `
          <div class="px-4 py-3">
            <div class="flex items-center justify-between gap-3">
              <div>
                <div class="text-sm font-semibold text-regen-blue">${e.title}</div>
                <div class="text-sm text-slate-600 mt-1">${e.where}</div>
              </div>
              <div class="text-right">
                <div class="text-xs px-2 py-1 rounded-lg bg-regen-bg border border-slate-200 text-slate-600">${e.type}</div>
                <div class="text-xs text-slate-400 mt-2">${e.when}</div>
              </div>
            </div>
          </div>
        `).join("") || `<div class="px-4 py-4 text-sm text-slate-600">Nenhum evento encontrado.</div>`;
      }
      filterPickupType?.addEventListener("change", renderEvents);
      filterPickupQuery?.addEventListener("input", renderEvents);
      renderEvents();

      // Treinamentos
      const trainingsGrid = document.getElementById("trainingsGrid");
      const filterTraining = document.getElementById("filterTraining");

      function renderTrainings(){
        if (!trainingsGrid) return;
        const q = (filterTraining?.value || "").toLowerCase().trim();
        const list = !q ? trainings : trainings.filter(t => (t.title + " " + t.level + " " + t.status).toLowerCase().includes(q));
        trainingsGrid.innerHTML = list.map(t => `
          <div class="rounded-2xl border border-slate-200 bg-white p-4 hover:-translate-y-[2px] hover:shadow-soft transition">
            <div class="text-sm font-semibold text-regen-blue">${t.title}</div>
            <div class="text-sm text-slate-600 mt-1">N√≠vel: ${t.level}</div>
            <div class="mt-2 text-xs inline-flex px-2 py-1 rounded-lg bg-regen-bg border border-slate-200 text-slate-600">${t.status}</div>
          </div>
        `).join("") || `<div class="text-sm text-slate-600">Nenhum treinamento encontrado.</div>`;
      }
      filterTraining?.addEventListener("input", renderTrainings);
      renderTrainings();

      // ===== Coleta especial (demo localStorage)
      const specialForm = document.getElementById("specialForm");
      const specialResult = document.getElementById("specialResult");
      const specialRequestsList = document.getElementById("specialRequestsList");
      const LS_SPECIAL = "hub_special_requests_v1";

      function loadSpecial(){ try{ return JSON.parse(localStorage.getItem(LS_SPECIAL) || "[]"); }catch{ return []; } }
      function saveSpecial(list){ localStorage.setItem(LS_SPECIAL, JSON.stringify(list)); }
      function renderSpecial(){
        if (!specialRequestsList) return;
        const list = loadSpecial();
        if (!list.length){
          specialRequestsList.innerHTML = `<div class="px-4 py-4 text-sm text-slate-600">Nenhuma solicita√ß√£o ainda.</div>`;
          return;
        }
        specialRequestsList.innerHTML = list.map(r => `
          <div class="px-4 py-3">
            <div class="flex items-start justify-between gap-3">
              <div>
                <div class="text-sm font-semibold text-regen-blue">${r.material} ‚Ä¢ ${r.volume}</div>
                <div class="text-sm text-slate-600 mt-1">${r.address}</div>
                <div class="text-xs text-slate-500 mt-1">${r.name} ‚Ä¢ ${r.phone}</div>
              </div>
              <div class="text-right">
                <div class="text-xs px-2 py-1 rounded-lg bg-regen-yellow/20 border border-regen-yellow text-regen-graphite">${r.status}</div>
                <div class="text-xs text-slate-400 mt-2">${new Date(r.ts).toLocaleString()}</div>
              </div>
            </div>
          </div>
        `).join("");
      }

      specialForm?.addEventListener("submit", (ev) => {
        ev.preventDefault();
        const req = {
          name: document.getElementById("specialName")?.value || "",
          phone: document.getElementById("specialPhone")?.value || "",
          address: document.getElementById("specialAddress")?.value || "",
          material: document.getElementById("specialMaterial")?.value || "",
          volume: document.getElementById("specialVolume")?.value || "",
          notes: document.getElementById("specialNotes")?.value || "",
          status: "Recebido",
          ts: Date.now()
        };
        const list = loadSpecial();
        list.unshift(req);
        saveSpecial(list);
        specialForm.reset();
        if (specialResult){
          specialResult.innerHTML = `
            <div class="rounded-2xl border border-regen-green/20 bg-regen-green/10 p-3 text-sm text-regen-green">
              Solicita√ß√£o enviada! Em breve a cooperativa retorna com o status.
            </div>
          `;
        }
        renderSpecial();
      });

      document.getElementById("btnViewMySpecialRequests")?.addEventListener("click", renderSpecial);
      renderSpecial();

      // ===== Ouvidoria (demo localStorage)
      const ticketForm = document.getElementById("ticketForm");
      const ticketResult = document.getElementById("ticketResult");
      const ticketsList = document.getElementById("ticketsList");
      const LS_TICKETS = "hub_tickets_v1";

      function loadTickets(){ try{ return JSON.parse(localStorage.getItem(LS_TICKETS) || "[]"); }catch{ return []; } }
      function saveTickets(list){ localStorage.setItem(LS_TICKETS, JSON.stringify(list)); }
      function renderTickets(){
        if (!ticketsList) return;
        const list = loadTickets();
        if (!list.length){
          ticketsList.innerHTML = `<div class="px-4 py-4 text-sm text-slate-600">Nenhum protocolo ainda.</div>`;
          return;
        }
        ticketsList.innerHTML = list.map(t => `
          <div class="px-4 py-3">
            <div class="flex items-start justify-between gap-3">
              <div>
                <div class="text-sm font-semibold text-regen-blue">${t.type.toUpperCase()} ‚Ä¢ ${t.subject}</div>
                <div class="text-sm text-slate-600 mt-1">${t.message}</div>
              </div>
              <div class="text-right">
                <div class="text-xs px-2 py-1 rounded-lg bg-regen-bg border border-slate-200 text-slate-600">Protocolo ${t.id}</div>
                <div class="text-xs text-slate-400 mt-2">${new Date(t.ts).toLocaleString()}</div>
              </div>
            </div>
          </div>
        `).join("");
      }

      ticketForm?.addEventListener("submit", (ev) => {
        ev.preventDefault();
        const id = Math.random().toString(16).slice(2, 8).toUpperCase();
        const item = {
          id,
          type: document.getElementById("ticketType")?.value || "duvida",
          subject: document.getElementById("ticketSubject")?.value || "",
          message: document.getElementById("ticketMessage")?.value || "",
          ts: Date.now()
        };
        const list = loadTickets();
        list.unshift(item);
        saveTickets(list);
        ticketForm.reset();
        if (ticketResult){
          ticketResult.innerHTML = `
            <div class="rounded-2xl border border-regen-blue/20 bg-regen-bg p-3 text-sm text-regen-blue">
              Enviado! Protocolo <strong>${id}</strong>.
            </div>
          `;
        }
        renderTickets();
      });

      document.getElementById("btnViewMyTickets")?.addEventListener("click", renderTickets);
      renderTickets();
    })();

    // ============================
    // ‚úÖ MAPA REAL (Leaflet + OSM) com suas coordenadas
    // ============================
    (function initRealMap(){
      const mapEl = document.getElementById("map");
      if(!mapEl || typeof L === "undefined") return;

      const points = [
        {
          id: "cooadesc",
          name: "COOADESC (CRGR)",
          type: "seletiva",
          address: "Rua Seis (Vila Esperan√ßa), 113 ‚Äì Farrapos, Porto Alegre ‚Äì RS ‚Ä¢ CEP 90250-000",
          lat: -30.003,
          lng: -51.206,
          desc: "Cooperativa de Triagem ‚Ä¢ CRGR COOADESC"
        },
        {
          id: "vilapinto",
          name: "Vila Pinto (CRGR)",
          type: "seletiva",
          address: "Regi√£o Bom Jesus / Jardim Carvalho ‚Äì Porto Alegre ‚Äì RS (aprox. Rua Bom Jesus)",
          lat: -30.036111,
          lng: -51.158333,
          desc: "Refer√™ncia territorial ‚Ä¢ CRGR Vila Pinto"
        },
        {
          id: "cooperilhas",
          name: "Cooperilhas (CRGR)",
          type: "seletiva",
          address: "Rua Para√≠ba, 177 ‚Äì Floresta, Porto Alegre ‚Äì RS ‚Ä¢ CEP 90220-001",
          lat: -30.016667,
          lng: -51.216667,
          desc: "Ilha Grande dos Marinheiros ‚Ä¢ CRGR Cooperilhas (aprox.)"
        }
      ];

      const map = L.map("map", { zoomControl: true }).setView([-30.02, -51.20], 12);

      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
        attribution: '&copy; OpenStreetMap'
      }).addTo(map);

      const markersLayer = L.layerGroup().addTo(map);
      const markersById = new Map();

      function popupHTML(p){
        return `
          <div style="min-width:240px">
            <div style="font-weight:800; margin-bottom:4px">${p.name}</div>
            <div style="font-size:12px; opacity:.85">${p.address}</div>
            ${p.desc ? `<div style="margin-top:8px; font-size:12px">${p.desc}</div>` : ""}
            <div style="margin-top:10px; font-size:11px; opacity:.75">Tipo: ${p.type}</div>
            <div style="margin-top:6px; font-size:11px; opacity:.75">Lat/Lng: ${p.lat.toFixed(6)}, ${p.lng.toFixed(6)}</div>
          </div>
        `;
      }

      function renderMarkers(list){
        markersLayer.clearLayers();
        markersById.clear();

        const bounds = [];
        list.forEach(p => {
          const m = L.marker([p.lat, p.lng]).addTo(markersLayer);
          m.bindPopup(popupHTML(p), { closeButton: true });
          markersById.set(p.id, { marker: m, data: p });
          bounds.push([p.lat, p.lng]);
        });

        if(bounds.length > 1) map.fitBounds(bounds, { padding: [22, 22] });
        if(bounds.length === 1) map.setView(bounds[0], 14);
      }

      const pointsListEl = document.getElementById("pointsList");
      const pointsBadgeEl = document.getElementById("pointsBadge");

      function renderList(list){
        if(pointsBadgeEl) pointsBadgeEl.textContent = String(list.length);
        if(!pointsListEl) return;

        pointsListEl.innerHTML = list.map(p => `
          <button type="button"
            class="w-full text-left rounded-2xl border border-slate-200 p-3 hover:bg-regen-bg transition"
            data-point-id="${p.id}"
          >
            <div class="text-sm font-semibold text-regen-blue">${p.name}</div>
            <div class="text-xs text-slate-500 mt-1">${p.address}</div>
            <div class="mt-2 flex flex-wrap gap-2">
              <span class="text-xs inline-flex px-2 py-1 rounded-lg bg-regen-bg border border-slate-200 text-slate-600">${p.type}</span>
              <span class="text-xs inline-flex px-2 py-1 rounded-lg bg-white border border-slate-200 text-slate-600">${p.lat.toFixed(3)}, ${p.lng.toFixed(3)}</span>
            </div>
          </button>
        `).join("");
      }

      document.addEventListener("click", (e) => {
        const btn = e.target.closest("[data-point-id]");
        if(!btn) return;
        const id = btn.getAttribute("data-point-id");
        const found = markersById.get(id);
        if(!found) return;
        const { marker } = found;
        map.setView(marker.getLatLng(), 15, { animate: true });
        marker.openPopup();
      });

      // Foco via se√ß√£o CRGR
      window.addEventListener("hub:focusPoint", (ev) => {
        const id = ev.detail?.id;
        const found = markersById.get(id);
        if (!found) return;
        setTimeout(() => {
          map.invalidateSize(true);
          map.setView(found.marker.getLatLng(), 15, { animate: true });
          found.marker.openPopup();
        }, 180);
      });

      const filterType = document.getElementById("filterType");
      function applyFilter(){
        const v = filterType?.value || "all";
        const filtered = v === "all" ? points : points.filter(p => p.type === v);
        renderMarkers(filtered);
        renderList(filtered);
      }

      if(filterType){
        const existing = Array.from(filterType.options).map(o => o.value);
        const types = Array.from(new Set(points.map(p => p.type)));
        types.forEach(t => {
          if(existing.includes(t)) return;
          const opt = document.createElement("option");
          opt.value = t; opt.textContent = t;
          filterType.appendChild(opt);
        });
        filterType.addEventListener("change", applyFilter);
      }

      const btnMyLocation = document.getElementById("btnUseMyLocation");
      btnMyLocation?.addEventListener("click", () => {
        if(!navigator.geolocation){
          alert("Seu navegador n√£o suporta geolocaliza√ß√£o.");
          return;
        }
        btnMyLocation.disabled = true;
        const oldText = btnMyLocation.textContent;
        btnMyLocation.textContent = "üìç Localizando...";

        navigator.geolocation.getCurrentPosition(
          (pos) => {
            const lat = pos.coords.latitude;
            const lng = pos.coords.longitude;

            const userMarker = L.circleMarker([lat,lng], {
              radius: 7,
              weight: 2,
              fillOpacity: 0.35
            }).addTo(map);
            userMarker.bindPopup("Voc√™ est√° aqui").openPopup();

            map.setView([lat,lng], 14, { animate: true });

            btnMyLocation.disabled = false;
            btnMyLocation.textContent = oldText || "üìç Perto de mim";
          },
          () => {
            alert("N√£o foi poss√≠vel obter sua localiza√ß√£o. Permita o acesso e tente novamente.");
            btnMyLocation.disabled = false;
            btnMyLocation.textContent = oldText || "üìç Perto de mim";
          },
          { enableHighAccuracy: true, timeout: 8000 }
        );
      });

      renderMarkers(points);
      renderList(points);

      // Tab hidden -> recalcula
      document.addEventListener("click", (e) => {
        const btn = e.target.closest('[data-open-tab="tab-map"]');
        if(!btn) return;
        setTimeout(() => map.invalidateSize(true), 180);
      });

    })();
  </script>
</body>
</html>
